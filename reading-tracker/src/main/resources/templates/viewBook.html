<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View Book</title>
    <link rel="stylesheet" href="/css/style.css">

</head>
<body>
    <div class="book-details">
        <h1 id="book-name">Book Title</h1>
        <img id="book-image" src="" alt="Book Cover" style="max-width: 200px;"><br>
        <p><strong>Author:</strong> <span id="book-author"></span></p>
        <p><strong>Description:</strong> <span id="book-description"></span></p>
        <p><strong>Status:</strong> <span id="book-status"></span></p>
        <p><strong>Start Date:</strong> <span id="book-startDate"></span></p>
        <p><strong>End Date:</strong> <span id="book-endDate"></span></p>
        <p><strong>Rating:</strong> <span id="book-rating"></span></p>
        <p><strong>Genre:</strong> <span id="book-genre"></span></p>
        <a href="/api/home">⬅️ Back</a>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const bookId = params.get("id");

        async function loadBook() {
            const token = localStorage.getItem("token");

            const res = await fetch(`/api/home/view/book?id=${bookId}`, {
                headers: {
                    "Authorization": `Bearer ${token}`
                }
            });

            if (!res.ok) {
                document.body.innerHTML = "<h2>Failed to load book. You may not have access.</h2>";
                return;
            }

            const book = await res.json();

            document.getElementById("book-name").innerText = book.name || "N/A";
            document.getElementById("book-image").src = book.imageUrl || "/images/placeholder.png";
            document.getElementById("book-image").alt = book.name || "Book Cover";
            document.getElementById("book-author").innerText = book.author || "N/A";
            document.getElementById("book-description").innerText = book.description || "N/A";
            document.getElementById("book-status").innerText = book.status || "N/A";
            document.getElementById("book-startDate").innerText = book.startDate || "N/A";
            document.getElementById("book-endDate").innerText = book.endDate || "N/A";
            document.getElementById("book-rating").innerText = book.rating || "N/A";
            document.getElementById("book-genre").innerText = book.genre || "N/A";
        }

        loadBook();
    </script>
</body>
</html>
